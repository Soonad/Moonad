Arelin.interact_with: (this: Arelin.Thing) -> (that: Arelin.Thing) -> Arelin.Thing
  (this) (that) let this.pos = Arelin.Thing.get_pos(this); let this.dir = Arelin.Thing.get_dir(this); let this.box = Arelin.Thing.get_box(this); let this.buf = Arelin.Thing.get_buf(this); let this.sid = Arelin.Thing.get_sid(this); let that.pos = Arelin.Thing.get_pos(that); let that.dir = Arelin.Thing.get_dir(that); let that.box = Arelin.Thing.get_box(that); let that.hit = Arelin.Thing.get_hit(that); let that.sid = Arelin.Thing.get_sid(this); let out_vec = Arelin.collide_with(this.pos)(this.dir)(this.box)(that.pos)(that.dir)(that.box); let this = out_vec<(self) Arelin.Thing>(this)((out_vec.value) let new_pos = F64.V3.add(this.pos)(out_vec.value); Arelin.Thing.set_pos(this)(new_pos)); let this = let apply_hit = ((hit) (this) hit<(self) Arelin.Thing>((hit.eff) (hit.pos) (hit.dir) (hit.box) let out_vec = Arelin.collide_with(this.pos)(this.dir)(this.box)(hit.pos)(hit.dir)(hit.box); out_vec<(self) Arelin.Thing>(this)((value) let compare_sid = F64.eql(this.sid)(that.sid); let apply_eff = ((eff) (this) eff<(self) Arelin.Thing>((eff.lif) let this.dmg = Arelin.Thing.get_dmg(this); compare_sid<(self) Arelin.Thing>(this)(Arelin.Thing.set_dmg(this)(F64.sub(this.dmg)(eff.lif))))((eff.dmg) compare_sid<(self) Arelin.Thing>(this)(Arelin.Thing.handle_shields(eff.dmg)(this)))((eff.mag) compare_sid<(self) Arelin.Thing>(this)(let v3 = F64.V3.new(F64.1)(F64.0)(F64.0); let dir = F64.V3.look_at(hit.pos)(this.pos)(v3); let vec = F64.V3.scale(eff.mag)(dir); Arelin.Thing.set_knk(this)(vec)))((eff.mag) (eff.dir) compare_sid<(self) Arelin.Thing>(this)(let vec = F64.V3.scale(eff.mag)(eff.dir); Arelin.Thing.set_knk(this)(vec)))((eff.dur) (eff.val) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.slowed(eff.dur)(eff.val))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.dur) (eff.val) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.hasted(eff.dur)(eff.val))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.dur) (eff.val) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.shielded(eff.dur)(eff.val))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.dur) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.silenced(eff.dur))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.dur) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.rooted(eff.dur))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.dur) compare_sid<(self) Arelin.Thing>(this)(let updated_buffs = List.cons<Arelin.Game.Buff>(Arelin.Game.Buff.stunned(eff.dur))(this.buf); Arelin.Thing.set_buf(this)(updated_buffs)))((eff.to_pos) (eff.all) F64.eql(eff.all)(F64.1)<(self) Arelin.Thing>(Arelin.Thing.move(this)(eff.to_pos))(this))) :: Arelin.Game.Effect -> Arelin.Thing -> Arelin.Thing; List.fold<Arelin.Game.Effect><Arelin.Thing>(this)(apply_eff)(hit.eff)))) :: Arelin.Game.Hit -> Arelin.Thing -> Arelin.Thing; List.fold<Arelin.Game.Hit><Arelin.Thing>(this)(apply_hit)(that.hit); this

