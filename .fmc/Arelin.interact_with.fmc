Arelin.interact_with: Π(this:Arelin.Thing) Π(that:Arelin.Thing) Arelin.Thing
  λthis λthat $this.pos=(Arelin.Thing.get_pos this);$this.dir=(Arelin.Thing.get_dir this);$this.box=(Arelin.Thing.get_box this);$this.buf=(Arelin.Thing.get_buf this);$this.sid=(Arelin.Thing.get_sid this);$that.pos=(Arelin.Thing.get_pos that);$that.dir=(Arelin.Thing.get_dir that);$that.box=(Arelin.Thing.get_box that);$that.hit=(Arelin.Thing.get_hit that);$that.sid=(Arelin.Thing.get_sid this);$out_vec=((((((Arelin.collide_with this.pos) this.dir) this.box) that.pos) that.dir) that.box);$this=((<out_vec λself Arelin.Thing> this) λout_vec.value $new_pos=((F64.V3.add this.pos) out_vec.value);((Arelin.Thing.set_pos this) new_pos));$this=$apply_hit=:Π(:Arelin.Game.Hit) Π(:Arelin.Thing) Arelin.Thing λhit λthis (<hit λself Arelin.Thing> λhit.eff λhit.pos λhit.dir λhit.box $out_vec=((((((Arelin.collide_with this.pos) this.dir) this.box) hit.pos) hit.dir) hit.box);((<out_vec λself Arelin.Thing> this) λvalue $compare_sid=((F64.eql this.sid) that.sid);$apply_eff=:Π(:Arelin.Game.Effect) Π(:Arelin.Thing) Arelin.Thing λeff λthis (((((((((((<eff λself Arelin.Thing> λeff.lif $this.dmg=(Arelin.Thing.get_dmg this);((<compare_sid λself Arelin.Thing> this) ((Arelin.Thing.set_dmg this) ((F64.sub this.dmg) eff.lif)))) λeff.dmg ((<compare_sid λself Arelin.Thing> this) ((Arelin.Thing.handle_shields eff.dmg) this))) λeff.mag ((<compare_sid λself Arelin.Thing> this) $v3=(((F64.V3.new F64.1) F64.0) F64.0);$dir=(((F64.V3.look_at hit.pos) this.pos) v3);$vec=((F64.V3.scale eff.mag) dir);((Arelin.Thing.set_knk this) vec))) λeff.mag λeff.dir ((<compare_sid λself Arelin.Thing> this) $vec=((F64.V3.scale eff.mag) eff.dir);((Arelin.Thing.set_knk this) vec))) λeff.dur λeff.val ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> ((Arelin.Game.Buff.slowed eff.dur) eff.val)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.dur λeff.val ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> ((Arelin.Game.Buff.hasted eff.dur) eff.val)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.dur λeff.val ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> ((Arelin.Game.Buff.shielded eff.dur) eff.val)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.dur ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> (Arelin.Game.Buff.silenced eff.dur)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.dur ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> (Arelin.Game.Buff.rooted eff.dur)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.dur ((<compare_sid λself Arelin.Thing> this) $updated_buffs=((<List.cons Arelin.Game.Buff> (Arelin.Game.Buff.stunned eff.dur)) this.buf);((Arelin.Thing.set_buf this) updated_buffs))) λeff.to_pos λeff.all ((<((F64.eql eff.all) F64.1) λself Arelin.Thing> ((Arelin.Thing.move this) eff.to_pos)) this));(((<<List.fold Arelin.Game.Effect> Arelin.Thing> this) apply_eff) hit.eff)));(((<<List.fold Arelin.Game.Hit> Arelin.Thing> this) apply_hit) that.hit);this

