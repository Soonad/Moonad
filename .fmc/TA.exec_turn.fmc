TA.exec_turn: Π(:TA.Game.Game) TA.Game.Game
  λgm @intr=:Π(:TA.Thing) Π(:TA.Thing) TA.Thing λthat λthis ((TA.interact_with this) that);@tick=:Π(:TA.Thing) Π(:(List TA.Thing)) Π(:(List TA.Thing)) (List TA.Thing) λthis λothers λres @this=((TA.Thing.set_hit this) <List.nil TA.Game.Hit>);@rst=(TA.Thing.get_rst this);@this=((<rst λ TA.Thing> @new_vel=(((F64.V3.new F64.0) F64.0) F64.0);@new_bst=F64.1;@new_box=(TA.Game.Hitbox.cbox ((F64.mul (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.1) Bit.1)) String.nil))) (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.0) Bit.0)) String.nil))));@new_act=F64.0;@new_tik=F64.0;@new_lit=<List.nil TA.Game.Light>;@new_rst=Bool.false;@this=((TA.Thing.set_vel this) new_vel);@this=((TA.Thing.set_bst this) new_bst);@this=((TA.Thing.set_box this) new_box);@this=((TA.Thing.set_act this) new_act);@this=((TA.Thing.set_tik this) new_tik);@this=((TA.Thing.set_lit this) new_lit);@this=((TA.Thing.set_rst this) new_rst);this) this);@boost=(TA.Thing.speed_multiplier_of this);@pos=(TA.Thing.get_pos this);@mov=(TA.Thing.get_mov this);@pad=(TA.Thing.get_pad this);@this=((TA.Thing.set_pos this) ((F64.V3.add pos) ((F64.V3.scale ((F64.mul mov) boost)) pad)));@this=(TA.Thing.update_buff_dur this);@pos=(TA.Thing.get_pos this);@knk=(TA.Thing.get_knk this);@wei=(TA.Thing.get_wei this);@new_pos=((F64.V3.add pos) knk);@knk_len=(F64.V3.len knk);@new_knk=((<((F64.gtn knk_len) F64.0) λ F64.V3> @force=((F64.max ((F64.sub knk_len) wei)) F64.0);((F64.V3.scale force) (F64.V3.norm knk))) knk);@this=((TA.Thing.set_pos this) new_pos);@this=((TA.Thing.set_knk this) new_knk);@fun=(TA.Thing.get_fun this);@this=(fun this);@this=(((<<List.fold TA.Thing> TA.Thing> this) intr) others);@tik=(TA.Thing.get_tik this);@this=((TA.Thing.set_tik this) ((F64.add tik) F64.1));@this_chi=(TA.Thing.get_chi this);@chi_init=:Π(:TA.Thing) TA.Thing λchi ((TA.Thing.get_fun chi) chi);@chi_list=((<<List.map TA.Thing> TA.Thing> chi_init) this_chi);@this=((TA.Thing.set_chi this) <List.nil TA.Thing>);@this_pos=(TA.Thing.get_pos this);@pos_x=(F64.V3.get_z this_pos);@pos_y=(F64.V3.get_y this_pos);@pos_z=(F64.V3.get_z this_pos);@new_x=((F64.min ((F64.max (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.1) Bit.0)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0)) String.nil)))))) pos_x)) (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.1) Bit.0)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0)) String.nil)))));@new_y=((F64.min ((F64.max (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.0) Bit.0)) String.nil)))))) pos_y)) (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.0) Bit.0)) String.nil)))));@new_z=((F64.min ((F64.max F64.0) pos_z)) (F64.parse ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.0) Bit.1) Bit.0)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.0) Bit.1)) ((String.cons ((((((((((((((((Char.new Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.0) Bit.1) Bit.1) Bit.0) Bit.1) Bit.1) Bit.0)) String.nil)))));@this=((TA.Thing.set_pos this) (((F64.V3.new new_x) new_y) new_z));@dmg=(TA.Thing.get_dmg this);@mhp=(TA.Thing.get_mhp this);@new_dmg=((F64.max F64.0) ((F64.min mhp) dmg));@this=((TA.Thing.set_dmg this) new_dmg);@sid=(TA.Thing.get_sid this);@dmg=(TA.Thing.get_dmg this);@mhp=(TA.Thing.get_mhp this);@no_hp=Bool.false;@die=(TA.Thing.get_die this);@xs=((<((Bool.or die) no_hp) λ (List TA.Thing)> res) ((<List.cons TA.Thing> this) res));((<List.concat TA.Thing> chi_list) xs);@things_id=:Π(:(List TA.Thing)) (List TA.Thing) λx x;@stage=(<gm λ (List TA.Thing)> λstage stage);@stage_nil=<List.nil TA.Thing>;@new_stage=((((<<TA.fold_with_context TA.Thing> (List TA.Thing)> stage_nil) tick) stage) things_id);(TA.Game.Game.new new_stage)

